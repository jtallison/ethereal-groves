<!doctype html>
<html>
<!-- <html class="nxUIFix"> -->

<head>
  <meta charset="utf-8">
  <title>Laptop Orchestra of Louisiana - Fall 2020</title>
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <link rel="apple-touch-icon" sizes="180x180" href="/media/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/media/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/media/favicon/favicon-16x16.png">
  <link rel="manifest" href="/media/favicon/site.webmanifest">

  <link rel="stylesheet" href="/styles/main.css">
  <link rel="stylesheet" href="/glass-control/css/glass-viewer.css">

  <link href="https://fonts.googleapis.com/css?family=Vollkorn" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">

  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="/js/Tone.js"></script>
  <script type="text/javascript" src="/js/nexusUI.js"></script>
  <script type="text/javascript" src="/js/artworks.js"></script>
  <!-- <script type="text/javascript" src="/js/ConcertSound.js"></script> -->
  <script type="text/javascript" src="/js/browserHub.js"></script>
  <script src= "https://player.twitch.tv/js/embed/v1.js"></script>

  <script src="/conductor-lol/lol-f2020-artworks2.js"></script>
  <!-- <script src="https://emdm-lols-2020.storage.googleapis.com/conductor-lol/lol-f2020-artworks2.js"></script> -->

  <!-- // Load Glass Works  -->
  <script src="/js/Glass.js"></script>
  <!-- <script src="/glass-control/glassPlaylist.js"></script> -->
  <script src="https://emdm-lols-2020.storage.googleapis.com/glass-control/glassPlaylist.js"></script>
  <script src="https://emdm-lols-2020.storage.googleapis.com/kitchen-control/kitchenPlaylist.js"></script>
  <script src="https://emdm-lols-2020.storage.googleapis.com/aerial-control/aerialPlaylist.js"></script>

  <script src="js/wavesurfer.min.js"></script>
  <!-- <script src="js/wavesurfer.regions.min.js"></script> -->


</head>

<body>
  <div class="display">

    <div id='star-field' class=''>
      <div id='star-text'>Welcome to<br><span class='title-text'>the Laptop Orchestra of Louisiana</span><br>The concert site will open at before 6:30</div>
      <!-- <div class='star'>*</div>
      <div class='star'>*</div>
      <div class='star'>*</div>
      <div class='star'>*</div>
      <div class='star'>*</div> -->
    </div>

    <div id="cover-blur"><div id='cover-text'></div></div>
    <div id="announce-div"><div id='announce-text'>Waiting for Concert to Begin . . .</div></div>

    <div id="nx-overlay">
      <div class="overlayContent">
          <div class="header blur"><img src='/media/laptop-orchestra-logo.png' class='logo'/><span class="title">Laptop Orchestra of Louisiana | Telematic becomes Automatic</span>
          </div>
          <p>Director | Jesse Allison, Technical Managers | Austin Franklin, Dylen Burchett</p>
          <p>Performers | Ka Hei Cheng, Scott Nelson, Matthew Bardin, Traci Fowler, Saida Joshua-Smith, Kenny Gorner, Gabriel Keowen,Robert Chedville, & Mary Moore</p>
          <p><a href="#" onclick="showMoreInfo('lol-info')">Meet the LOLs!</a> | Concert begins at 7:30. | Click logo below to enter.</p>
          <!-- <div class='centered'><div id='high-def'></div></div> -->
          <svg version="1.1" id="seatMap" x="0px" y="0px" viewbox="0 0 640 445" style="max-width: 70vh; enable-background:new 0 0 640 445;">
            <defs>
              <pattern id="lol-logo" patternUnits="userSpaceOnUse" x="77" width="485" height="485">
                <image href="/media/laptop-orchestra-logo.png" x="0" y="0" width="485" height="485" />
              </pattern>
            </defs>
            <rect x="4" y="4" style="fill:#92278F; fill-opacity:0.77;stroke:#B3B3B3;stroke-width:8;stroke-miterlimit:10;" width="632"
              height="437" />
            <rect x="77.5" y="70" style="fill:url(#lol-logo);stroke:#4D4D4D;stroke-width:8;stroke-miterlimit:10;" width="485.1"
              height="350" />
            <line style="fill:none;stroke:#4D4D4D;stroke-width:18;stroke-miterlimit:10;" x1="30" y1="40" x2="610" y2="40" />
          </svg>
      </div>
    </div>

    <div id='concert-display' class="no-display">
      <div id="concert-header" class="header">
        <img src='/media/laptop-orchestra-logo.png' class='logo' onclick="showMoreInfo('lol-info')"/>
        <span class="title">LOLs | Telematic becomes Automatic</span>
      </div>
      <div class='break'></div>

      <div id='work-1' class='work'></div>
      <div id='work-2' class='work'></div>
      <div id='work-3' class='work'></div>
      <div id='work-4' class='work'></div>
      <div id='work-5' class='work'></div>
      <div id='work-6' class='work'></div>
      <div id='work-7' class='work'></div>
      <div id='work-8' class='work'></div>
      
    </div>

    <div id="concert-footer" class="footer">
      <span><a href="#" onclick="showMoreInfo('lol-info')">Meet the LOLs!</a></span>
    </div>  

    <!-- <div id='more-info-display'> -->
      <div id='lol-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('lol-info')" moreinfodiv="lol-info">
        <div class='title'><p>The Laptop Orchestra of Louisiana</p></div>
        <div class='description'>
          <p>The LOLs are the performing ensemble of the Experimental Music & Digital Media program at LSU. 
            <br />
            For more information, please visit the <a href="http://emdm.lsu.edu/laptop-orchestra">EMDM website.</a>
          </p>
        </div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/bios/LOL-Radiowaves.jpg' /></div>
        <div class='personel'>
          <p><span class='bio-title'>Director</span>
            <div class='bio-individual'> <img src='/media/bios/allison.png' />
              <span class='bio-name'>Jesse Allison</span>
              <span class='bio-text'>
                Dr. Jesse Allison is an innovator in sonic art technology, thought, and practice. His work centers around the idea that computer interactivity, used wisely, can produce new and engaging forms of art. Technology research, interdisciplinary collaboration and creative activity are fluidly traversed echoing the spirit of his joint faculty position between the Center for Computation & Technology's Cultural Computing focus area (CCT-CC) and the LSU School of Music. 
              </span>
              <a href='http://emdm.lsu.edu'>emdm.lsu.edu</a>
            </div>
          </p>
          <hr>
          <p><span class='bio-title'>Technical Managers</span>
            <div class='bio-individual'> <img src='/media/bios/franklin.png' />
              <span class='bio-name'>Austin Franklin</span>
              <span class='bio-text'>Austin Franklin is a composer and sound artist based in Baton Rouge, LA. He received a Bachelor of Music degree from Lamar University, a Master of Music Composition degree from Louisiana State University and is currently pursuing a PhD in Experimental Music & Digital Media from Louisiana State University. His interests include music involving process, such as algorithmic composition and machine learning. His music has been selected for festivals and conferences such as the Red Stick FutureFest (2018), New Interfaces for Musical Expression (2019), Society of Composers Incorporated (2020), Alba Music Festival (2020), and Electric LaTex (2020)
              </span>
              <a href='http://austinfranklinmusic.com'>austinfranklinmusic.com</a>
            </div>
            <div class='bio-individual'> <img src='/media/bios/burchett.png' />
              <span class='bio-name'>Dylen Burchett</span>
              <span class='bio-text'>Dylan does a variety of sound-related things, usually with electronics.  They are currently pursuing a PhD in Experimental Music and Recording Media at Louisiana State University.  For tonight's concert, Dylan will be live coding in SuperCollider during Live Coding II, live coding in McLuhan.js during McLuhan Mediates the LOLs, contributing to some digital hocketing during Hocket I, and rummaging around on the floor during a halfway decent improvisation.</span>
            </div>
          </p>
          <hr>
          <p><span class='bio-title'>Performers</span>
            <div class='bio-individual'> <img src='/media/bios/cheng.png' />
              <span class='bio-name'>Ka Hei Cheng</span>
              <span class='bio-text'>Ka Hei Cheng has studied in the Education University of Hong Kong, the Hong Kong Baptist University and the Bowling Green State University. Born and raised in Hong Kong, Cheng approaches a diversified culture and philosophy that extend the musical dimensions and nourish a similarly diverse approach to her music composition by “brush strokes” with sonic palette. Under the influence of visual arts since her early ages, Cheng has particular interest in enriched and complex textual and timbral explorations. She is especially interested in exploring the sound of nature in the context of spectral music, spatialization and soundscape; and her piece, The Trigger Machine was performed in the Earth Day Art Model 2020, which was organized by IUPUI. She has also composed different genres of music, including music jingles, tailor-made event music and acoustic composition. She wrote a chamber orchestral piece, Nibiru, for the Cleveland Chamber Symphony and she was commissioned to write for a commercial promotional music for the video from the CNA Group.</span>
            </div>
            <div class='bio-individual'> <img src='/media/bios/nelson.png' />
              <span class='bio-name'>Scott Nelson</span>
              <span class='bio-text'>After completing degrees in music composition at University of the Pacific and Brigham Young University, Scott uprooted his life in the western states and headed South to pursue a Ph.D. at LSU’s EMDM program. Being well-versed in traditional music composition, Scott is relatively wet behind the ears in the worlds of computer and electronic music, and looks forward to wading to the greater depths of musical possibility those worlds provide.</span>
            </div>
            <div class='bio-individual'> <img src='/media/bios/bardin.png' />
              <span class='bio-name'>Matthew Bardin</span>
              <span class='bio-text'>Matthew A. Bardin is a current PhD student in LSU's EMDM department. Musically he is interested in creating environmental or atmospheric sounds using different media, and is currently working to formalize a dissertation topic that allows him to explore these avenues. When not studying, he teaches STEM courses to local high school students through the LSUPatyhways program. He also has a cat, named Bean.</span>
              <a href='http://matthewbardin.com'>matthewbardin.com</a>
            </div>
            <div class='bio-individual'> <img src='/media/bios/fowler.png' />
              <span class='bio-name'>Traci Fowler</span>
              <span class='bio-text'>I have a Music Education degree and taught middle school band for 10 years.  I am currently studying music composition at LSU.  In the spring, I will be adding the additional study of EMDM (Electronic Music and Digital Media). </span>
            </div>
            <div class='bio-individual'> <img src='/media/bios/saida.png' />
              <span class='bio-name'>Saida Joshua-Smith</span>
              <span class='bio-text'>Saida is a Junior in the EMDM department. She is from New Orleans and grew up with music. has been making music since she was a child. Her passion is in music production and engineering with an intrigue in being a musician.</span>
            </div>
            <div class='bio-individual'> <img src='/media/bios/gornor.png' />
              <span class='bio-name'>Kenny Gorner</span>
              <span class='bio-text'>I am Kenneth Gornor, and I am an LSU Sophomore. In Jungle Bells, I am adding a series of delays to the audio with a pd patch, while playing guitar over the delayed audio, and sending it out through my twitch stream to the next person. I am also a controller in the Primordial Glitches piece.</span>
            </div>
            <div class='bio-individual'> <img src='/media/bios/keowen.png' />
              <span class='bio-name'>Gabriel Keowen</span>
              <span class='bio-text'>Gabriel Keowen is a third-year undergraduate student in Experimental Music. For this concert, he is one of the performers for the piece "Primordial Glitches."</span>
            </div>
            <div class='bio-individual'> <img src='/media/bios/chedville.png' />
              <span class='bio-name'>Robert Chedville</span>
              <span class='bio-text'>Robert is currently an undergraduate student at LSU studying Music Composition as well as Experimental Music & Digital Media. He has composed chamber music, ensemble music, and electroacoustic music alike. One piece, titled “Typhous Tranquility,” is a great example. This composition is based off of a poem that is written for soprano voice and piano accompaniment. Throughout the piece, the theme changes to distinguish a new stanza of the poem. By exploring different different timbres, Robert crafts music for telling an audible narrative. Works have been submitted to festivals around LSU and in the surrounding area such as Electric LaTex. He has many works forthcoming that fit within acoustic and electronic instruments alike, including a symphony that utilizes full orchestra and a laptop orchestra together for a unique performance.</span>
            </div>
            <div class='bio-individual'> <img src='/media/bios/moore.png' />
              <span class='bio-name'>Mary Moore</span>
              <span class='bio-text'>My name is Mary Moore, and I'm a double major in EMDM and Composition at LSU. I'm a musician and a visual artist.</span>
            </div>
        </div>
      </div>


      <div id='hocket2-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('hocket2-info')" moreinfodiv="hocket2-info">
        <div class='title'><p></p>Hocket 2 – Jungle Bells</div>
        <div class='description'>
          <p>Scott - In Jungle Bells, we are essentially playing an endless game of telephone between the four members. As one sends sounds to another, the received sounds are manipulated and morphed before being sent to the next member in the loop. Upon reaching the fourth member of the group, the amassed sounds are again received by the first member who started the loop, and manipulated further. For my portion of the sound loop, I am generating both plucked and soaring synth sounds using an in-browser live coding program called gibber at rates and pitches that are variable in real time. At the same time, I am receiving the sound loop, and processing it through a Max/MSP patch that does some basic manipulation, as well as sampling the incoming sound into a playable keyboard synth.</p>
          <p>Austin - I am triggering native MaxMSP audio files (bell sounds, chimes, etc.) and manipulating those is various ways, while at other times simply allowing the compression algorithms or other performers to introduce artifacts ad libitum. Two methods of processing, ring modulation and feedback, are primarily used throughout the composition.</p>
          <p>Kenny - In Jungle Bells, I am adding a series of delays to the audio with a pd patch, while playing guitar over the delayed audio, and sending it out through my twitch stream to the next person.</p>
        </div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/hocket-2-diagram.jpg' /></div>
        <div class='personel'>
          Created & Performed by:
          <ul>
            <li>Austin Franklin</li>
            <li>Scott Nelson</li>
            <li>Ka Hei Cheng</li>
            <li>Kenneth Gornor</li>
          </ul>
        </div>
      </div>
      <div id='glass-harp-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('glass-harp-info')" moreinfodiv="glass-harp-info">
        <div class='title'>Glass Harp</div>
        <div class='description'><p>The Glass Harp is a set of glasses filled with water at a specific level played by someone circling the edge of the glass with their finger to vibrate the water. Each glass sounds differently because of the frequency created with the different levels of water in each glass. Dr. Allision will be playing the harp as Saida sings a little back up.</p></div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/glass-harp-diagram.jpg' /></div>
        <div class='personel'>
          Created & Performed by:
          <ul>
            <li>Jesse Allison</li>
            <li>Saida Joshua-Smith</li>
          </ul>
        </div>
      </div>
      <div id='halfway-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('halfway-info')" moreinfodiv="halfway-info">
        <div class='title'>Halfway Decent Improvisation</div>
        <div class='description'><p>Dylan Burchett creates and performs on his own instruments devised from common electronic parts. To see more, go to <a href="https://www.youtube.com/channel/UCksSpVwyLZZOL_y7IQ5ui-Q">Dylan's channel on youTube</a>.</p></div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/halfway-diagram.jpg' /></div>
        <div class='personel'>
          Composed and performed by: Dylan Burchett
        </div>
      </div>
      <div id='lc-2-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('lc-2-info')" moreinfodiv="lc-2-info">
        <div class='title'>Live Coding II – Supercollider & Tweakable</div>
        <div class='description'>
          <p>Live coding is the practice of creating code that creates music and visuals live, extemporaneously. A large community of live coders make music of all types of styles from experimental to minimalistic to full on Algoraves. Check it out at <a href="https://toplap.org/">Toplap.org</a></p>
          <p>Traci - In this piece I provide the visual aspect.  I use a live coding program called Tweakable.  I use the different video features of this program to create a visual performance to compliment the audio being performed.</p>
          <p><a href="https://tweakable.org/">Tweakable</a> is an audio/visual algorithmic programming site that can be live coded. Try it out!</p>
          <p><a href="https://supercollider.github.io/">Supercollider</a> is a programming language that is heavily used by the live coding community.</p>
        </div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/lc-2-diagram.jpg' /></div>
        <div class='personel'>
          Created & Performed by:
          <ul>
            <li>Traci Martin</li>
            <li>Dylan Burchett</li>
          </ul>
        </div>
      </div>
      <div id='kitchen-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('kitchen-info')" moreinfodiv="kitchen-info">
        <div class='title'>Kitchen Glassware Movement Studies</div>
        <div class='description'>A light diversion in the kitchen.</div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/kitchen-diagram.jpg' /></div>
        <div class='personel'>
          Created & Performed by:
          <ul>
            <li>Kenny Gornor</li>
            <li>Gabe Keowen</li>
          </ul>
        </div>
      </div>
      <div id='mcluhen-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('mcluhen-info')" moreinfodiv="mcluhen-info">
        <div class='title'>McLuhen Mediates the LOLs</div>
        <div class='description'>
          <p>You can view a livestream here. However, for the full browser experience follow the instructions below. Head to: <a href="http://live.emdm.io/mcluhen" target="_blank">live.emdm.io/mcluhen</a>
            <ol>
              <li>1) Turn off browser security/do not block popups.<br/><br/>
                <div class='instruction-image'> <img src='/media/mcluhen-security-correct.png' /></div>
                <div class='instruction-image'> <img src='/media/mcluhen-site-settings.png' /></div>
              </li>
              <li>2) Reload the page and wait a moment.<br/><br/>
                <div class='instruction-image'> <img src='/media/mcluhen-resize.png' /></div>
              </li>
              <li>3) Follow the instructions to resize and center the browser window<br/><br/>
                <div class='instruction-image'> <img src='/media/mcluhen-move.png' /></div>
              </li>
            </ol>
          </p> 
          <p>mcluhen.js is a framework created by our EMDM Graduate Ben Taylor. The framework allows for a performer to control your browser through a website so that anyone who loads the page can have it perform live.</p>
        </div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/mcluhen-diagram.jpg' /></div>
        <div class='personel'>
          Piece created & Performed by:
          <ul>
            <li>Ka Hei Cheng</li>
            <li>Dylan Burchett</li>
          </ul>
        </div>
      </div>
      <div id='telepiano-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('telepiano-info')" moreinfodiv="telepiano-info">
        <div class='title'>Telepiano Live</div>
        <div class='description'>A robotic piano, classical music mashup, live stream, who could ask for more?</div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/telepiano-diagram.jpg' /></div>
        <div class='personel'>
          Created & Performed by:
          <ul>
            <li>Austin Franklin</li>
            <li>Bobby Chedville</li>
            <li>Gabe Keowen</li>
            <li>Kenny Gornor</li>
          </ul>
        </div>
      </div>
      <div id='hocket-1-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('hocket-1-info')" moreinfodiv="hocket-1-info">
        <div class='title'>Hocket I</div>
        <div class='description'>
          <p>A second hocket using the latency of the internet as the foundation for music.</p>
          <p>Bobby - Implementing sound using VST plug-in "Cloudrum" by AmpleSound, also using feedback loop by capturing Matt Bardin's stream</p>
          <p>Dylan - For Hocket I, Dylan is processing audio received from Bobby in max/msp, adding a little synthesis, and passing the processed and synthesized audio along to Matt.</p>
          <p>Matt - a hocket based through the internet, taking in audio from another performer's twitch channel, processing it, then broadcasting the new audio through his (Matthew's) personal channel. Each performer does this, setting up a feedback loop of processing and compression that is finally sent out to the main concert performance.</p>
        </div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/hocket-1-diagram.jpg' /></div>
        <div class='personel'>
          Created & Performed by:
          <ul>
            <li>Dylan Burchett</li>
            <li>Matthew Bardin</li>
            <li>Bobby Chedville</li>
          </ul>
        </div>
      </div>
      <div id='lc-1-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('lc-1-info')" moreinfodiv="lc-1-info">
        <div class='title'>Live Coding 1 – Cubic Infinity</div>
        <div class='description'>
          <p>Our second round of live coding done entirely in browser with <a href="https://livecodelab.net/">livecodelab.net</a>. This performance demonstrates the live coding styl of seeing the code being written while simultaneously hearing and seeing the results.</p>
          <p> Bobby - controlling all audio aspects (tempo, randomization, instrument entrances, beats to play on, etc.)  using  the LiveCodeLab web browser</p>
          <p> Mary - </p>
        </div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/lc-1-diagram.jpg' /></div>
        <div class='personel'>
          Created & Performed by:
          <ul>
            <li>Mary Moore</li>
            <li>Bobby Chedville</li>
          </ul>
        </div>
      </div>
      <div id='primordial-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('primordial-info')" moreinfodiv="primordial-info">
        <div class='title'>Primordial Glitches</div>
        <div class='description'><p>
          Primordial Glitches, was written and programmed by Matthew. In this piece performers are sending instructions from their computers over the internet to a program running on the main hub computer. This hub software is then taking the incoming commands and using them to trigger various glitchy blips and drones that work to set a unique atmosphere over a etherial backing track.
        </p></div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/primordial-diagram.jpg' /></div>
        <div class='personel'>
          <p>Composed and Created by: Matt Bardin</p>
          Performed by:
          <ul>
            <li>Austin Franklin  </li>
            <li>Dylan Burchett    </li>
            <li>Ka Hei Cheng      </li>
            <li>Scott Nelson      </li>
            <li>Matthew Bardin    </li>
            <li>Tracy Martin      </li>
            <li>Saida Joshua Smith</li>
            <li>Gabriel Keowen    </li>
            <li>Bobby Chedville   </li>
            <li>Mary Moore        </li>
            <li>Kenneth Gornor    </li>
          </ul>
        </div>
      </div>
      <div id='aerial-info' class='more-info'>
        <img class='show-less-info' src='/media/more-info.png' onclick="showLessInfo('aerial-info')" moreinfodiv="aerial-info">
        <div class='title'>Aerial Glass</div>
        <div class='description'></div>
        <div class='break'></div>
        <div class='diagram'> <img src='/media/diagrams/aerial-diagram.jpg' /></div>
        <div class='personel'>
          Created & Performed by:
          <ul>
            <li>Austin Franklin</li>
            <li>Saida Joshua-Smith</li>
          </ul>
        </div>
      </div>
    <!-- </div> -->

    <div id="main-display">
      <!-- <div id="header" class="header">
        <span class="title">LOLs Concert of Telepresence</span>
      </div> -->
      <div id='message'></div>  

      <div id='aerial-video-bank' class='live-aerial glass-video-bank'>
        <!-- Videos will be inserted here. -->
      </div>

      <div id='kitchen-video-bank' class="live-kitchen glass-video-bank">
        <img id='kitchen-background' src='/media/kitchen/kitchen-background.png' />
        <!-- Videos will be inserted here. -->
      </div>

      <div id='glass-video-bank' class='live-glass glass-video-bank'>
        <!-- Videos will be inserted here. -->
      </div>
    </div>

    <div id="end-display" style="display: none;">
      <p>
        <br>
        <br><em>Thanks for Listening!<br>
          Please visit <a href="http://emdm.lsu.edu">emdm.lsu.edu</a> for more like this.</em>
      </p>
      <div id="footer">by <a href="https://emdm.lsu.edu">EMDM @ LSU</a></div>
    </div>
	</div>
	
	<div id="testing-controls">
		<div id="slider1"></div>
		<br>
		<button onClick="tapEnd()">Tap To End Session</button>
	</div>




	<script>
    let standalone = false;
    
    // var AudioContext = window.AudioContext || window.webkitAudioContext;
    // var audioCtx = new AudioContext();

		var Hub = require('hub');
    var hub = new Hub();

    // hub.ctx = audioCtx;
    // Tone.setContext(audioCtx);
    hub.ctx = Tone.context.rawContext;
    
    hub.user.name = "a_user_" + Math.floor(Math.random() * 99999);
    hub.user.color = getRandomColor();
    console.log(hub.user.color);
    hub.user.location = {
      x: 0.5,
      y: 0.5
    }

    hub.init();
      // Register early so I can control overlays & Announcements.
    hub.user.location.x = 0.5;
    hub.user.location.y = 0.5;
    console.log(hub.user.location);
    hub.register();

  let coverBlur = document.getElementById('cover-blur');
  let coverText = document.getElementById('cover-text');
  let announceDiv = document.getElementById('announce-div');
  let announceText = document.getElementById('announce-text');
  let starfield = document.getElementById('star-field');
  let starfieldText = document.getElementById('star-text');
  let stars = document.getElementsByClassName('star');
  
  let displays = {};
  displays.overlay = document.getElementById('nx-overlay');
  displays.concert = document.getElementById('concert-display');
  displays.main = document.getElementById('main-display');
  displays.end = document.getElementById('end-display');
  displays.testControls = document.getElementById('testing-controls');

  let works = document.getElementsByClassName('work');

	let sections = ['preConcert', 'performance', 'postConcert'];
	let currentSection;

	let setMessage = (text) => {document.getElementById('message').innerText = text};
  let messageText = {
    'preConcert': { default: 'Welcome\npress a number...',
                    1: 'Welcome Performer\nloading density...', 
                    2: 'designing interstellar experience...', 
                    3: 'initiating gravity...',
                    4: 'Gravity|Density'
                  },
    'performance':  { default: 'listen...',
                        doris: 'Sing it Doris!'
                      },
    'postConcert': { default: 'Thank you for listening' }
  }



    // let glassClips = {
		// 	g: '/media/notes-mp4/G-note-Small.mp4',
		// 	a: '/media/notes-mp4/A-low-Small.mp4', 
		// 	b: '/media/notes-mp4/B-note-Small.mp4',
		// 	c: '/media/notes-mp4/C-note-Small.mp4',
		// 	d: '/media/notes-mp4/D-note-Small.mp4',
		// 	e: '/media/notes-mp4/E-note-Small.mp4',
		// 	f: '/media/notes-mp4/Fs-note-Small.mp4',
		// 	G: '/media/notes-mp4/G-highNote-Small.mp4',
		// 	bass: '/media/notes-mp4/E-bass-Small.mp4',
		// 	squeek: '/media/notes-mp4/G-highSqueek-Small.mp4'
		// }

		// let videoBank = document.getElementById('video-bank');
    // concertSound.loadGlassVideos()
    // let aerialClips = aerialPlaylist;
    // let kitchenClips = kitchenPlaylist;
    // let glassClips = glassPlaylist;

		function randomItem(list) {
      return list[Math.floor(Math.random() * list.length)];
    }
    
    function randomTakeItem(list) {
      let item = list.splice(Math.floor(Math.random() * list.length),1)
      return item[0];
		}
		
		hub.channel('cue', null, null, (data) => { cue(data); });

		function cue(data) {
			hub.log('Cue', data);
			switch(data.name){
				case 'preshow':
					setMessage(messageText.preConcert[1]);
					break;
				case 'starfield':
					revealStars(true)
					setMessage(messageText.preConcert[2]);  // Make rotating
					break;
				case 'performance': 
					revealStars(false)
					setMessage(messageText.performance.default);
					break;
				case 'postshow': 
					setMessage(messageText.postConcert.default);
					break;
				case 'demo':
					break;
				case 'default':
					console.log('Sample Command not recognized: ', data.val, data.name);
			}
		}

    function showMoreInfo(moreInfoDiv) {
      console.log('more-info', event);
      let moreInfo = document.getElementById(moreInfoDiv);
      moreInfo.classList.add('show-more-info');
    }

    function showLessInfo(moreInfoDiv) {
      console.log('less-info', event)
      let moreInfo = document.getElementById(moreInfoDiv);
      moreInfo.classList.remove('show-more-info');
    }

  // Starfield & Stars
	function setRandomAnimationDuration(star) {
    star.style.animationDuration = Math.floor(Math.random() * 10 + 1) + "s";
  }

  Object.entries(stars).forEach (([number, star]) => {
    star.addEventListener("transitionend", setRandomAnimationDuration(star));
    star.addEventListener('ontouch', () => {

    });
  })

  function revealStars(enable=true) {
    if(enable) {
      starfield.style.display = 'block';
      starfield.classList.add('fade-in');
      coverBlur.style.display = 'block';
      coverBlur.classList.add('fade-in');
      Object.entries(stars).forEach (([number, star]) => {
        star.classList.add('star-slide');
      })
    } else {
      starfield.classList.remove('fade-in');
      Object.entries(stars).forEach (([number, star]) => {
        star.classList.remove('star-slide');
      })
      starfield.style.display = 'none';
      coverBlur.classList.remove('fade-in');
      coverBlur.style.display = 'none';
    }
  }

  function controlBlurring(enable=true) {
    if(enable) {
      controlBlur.style.top = gravSound.wavesurferDiv.offsetTop+"px";
      controlBlur.style.display = 'block';
      controlBlur.classList.add('fade-in');
    } else {
      controlBlur.classList.remove('fade-in');
      controlBlur.style.display = 'none';
    }
  }

  // let lowDefNX = new Nexus.TextButton('#high-def', {
  //   'size': [150,50],
  //   'state': false,
  //   'text': 'Low Bandwidth',
  //   'alternateText': 'High Def',
  //   'mode': 'toggle'
  // })
  // lowDefNX.on('change', (v)=> {
  //   if(v){
  //     concertSound.hd = true;
  //   } else {
  //     concertSound.hd = false;
  //   }
  // })
  
  let masterFaderNX = new Nexus.Slider('#slider1', {
    'mode': 'absolute'
  });
  hub.channel('masterFader', null, null, function(data) {
    console.log('masterFader', data)
    masterFaderNX.value = data.val;
    // gravSound.masterFader(data.val);
    // gravSound.gain.gain.setValueAtTime(data.val, gravSound.tone.context.currentTime, 0.015);
    concertSound.masterGain(data.val);
  });
  masterFaderNX.on('change', function(v) {
    // do not send along if not changed from a user interaction.
    // if (masterFaderNX.clicked) {
    //   hub.send('masterFader', {
    //     val: v
    //   });
    // };
  });

  hub.channel('announcement', null, null, (data)=> {
    console.log('Announcement', data);
    if((data.announcement != undefined) && (data.announcement != "") && data.live) {
      // Set text on Announcement div
      announceText.innerHTML = data.announcement;
      announceDiv.classList.add('announce-all');
    } else if (data.live == false || data.announcement == "") {
      announceDiv.classList.remove('announce-all');
    } 
    if (data.star){
      if(data.live){
        if(starfield.classList.contains('starfieldOn')) {
          starfield.classList.remove('starfieldOn')
        } else {
          starfield.classList.add('starfieldOn')
        }
      } else {
        starfield.classList.remove('starfieldOn')
      }
    } else if (data.cover) {
      if(data.live){
        if(coverBlur.classList.contains('coverOn')) {
          coverBlur.classList.remove('coverOn')
        } else {
          coverBlur.classList.add('coverOn')
        }
      } else {
        coverBlur.classList.remove('coverOn')
      }
    }
  })

  hub.channel('questions', null, null, (data)=>{
    console.log('questions', data)
    if(data.currentQuestion) {
      questions.innerHTML = data.currentQuestion;
    }
  })

      // Probably move inside artwork.js
  // let questions = document.querySelector('#q-and-a .questions');
  // let questionToAsk = document.querySelector('#my-question');
  //   let askNX = new Nexus.TextButton('#ask-my-question', {
  //     'size': [150,50],
  //     'state': false,
  //     'text': 'Ask'
  //     // 'alternateText': 'Stop'
  //   })
  //   askNX.on('change', (v)=> {
  //     if(v){
  //       console.log('Ask: ', questionToAsk.value)
  //       hub.send('questions', {
  //         askQuestion: questionToAsk.value
  //       })
  //       questionToAsk.value = "";
  //     }
  //   })
	
	function titleClicked() {
		// Respond?
  };

	hub.channel('enable', null, null, (data) => {enable(data);});

  function enable(data) {
    if (data.user === hub.user.name || data.user == 'all') {
      if (data.val == true) {
        // enable?
      } else {
				// disable?
			}
    }
	}
	
	// seatMap.addEventListener("click", getClickPosition, false);
  // StartAudioContext(Tone.context, '#seatMap').then(function() {
  //   console.log("AudioStarted");
  //   //reverb.generate();
  // })
  // let concertSound;
  document.querySelector('#seatMap').addEventListener('click', async (e) => {
    // await Tone.start()
    Tone.start()
    // concertSound = new ConcertSound();
    // hub.user.pitch = concertSound.pitch;
    console.log('audio processor is ready')
    concertSound.loadWorks();
    console.log('Loading Works...')
    getClickPosition(e);
    if (standalone) {         // Setup Standalone Interactions
      standaloneClicks();
    }
    hub.send('concert', {getState: true});
  })

  function getClickPosition(e) {
    var m = seatMap.getScreenCTM();
    var p = document.getElementById('seatMap').createSVGPoint();
    p.x = e.clientX;
    p.y = e.clientY;
    p = p.matrixTransform(m.inverse());
    var tx = document.getElementById('seatMap').getAttribute("viewBox").split(" ")[2];
    var ty = document.getElementById('seatMap').getAttribute("viewBox").split(" ")[3];
    var mx = p.x / tx;
    var my = p.y / ty;

    hub.user.location.x = mx;
    hub.user.location.y = my;
    console.log(hub.user.location);

    // concertSound.triggerPitch();
    // hub.register();
    // FIXME: move default overlay into Hub
    // displays.overlay.style.display = 'none';
    displays.overlay.classList.add('no-display');
    // displays.main.style.display = 'block';
    displays.concert.classList.remove('no-display');
  }

  function standaloneClicks() {
    for (let work of works) {
      console.log('work', work)
      work.addEventListener('click', function() {
        // e = e || window.event;
        // var target = e.target || e.srcElement;
        console.log(this);    // This is the div id, not the piece id e.g. work-1
        let artwork = concertSound.artworks.find((obj) => {
          let returnedWork = obj.divID === this.id;
          return returnedWork
        })
        if(artwork.staged) {    // If already playing, stop and unstage
          concertSound.pauseWork(artwork.name);
          concertSound.stopWork(artwork.name);
          if(artwork.artistTalk) { concertSound.playArtistTalk(artwork.name, false)}
          concertSound.stageWork(artwork.name, false);
        } else {        // Stage, then start the work.
          // go large
          concertSound.stageWork(artwork.name, true);
          //delay & play the recording
          if(artwork.artistTalk) { 
            setTimeout((workName)=>{
              concertSound.playArtistTalk(workName, true)
              duration = (concertSound.getWork(workName).artistTalkDiv.duration * 1000) + 6000;
              setTimeout((workName)=>{
                concertSound.playWork(workName);
              }, duration, workName);
            }, 3000, artwork.name);
          } else {
            setTimeout((workName)=>{
              concertSound.playWork(workName);
            }, 3000, artwork.name);
          }
        }
      }, this.id);
    }
  }

  hub.channel('chat', null, null, function(data) {
    console.log("chat: " + data);
  });

  hub.channel('glassState', null,null, (data)=> {
    console.log('glassState', data);
    masterFaderNX.value = data.masterFader;
  });

  hub.channel('concert', null, null, (data) =>{
    console.log('concert', data);
    if (data.masterFader){
      masterFaderNX.value = data.masterFader;
    }
    if (data.section != currentSection) {
      currentSection = data.section;
    }
    if(concertSound.playlistLoaded && data.currentWork != concertSound.currentWork){
      if(data.currentWork) {
        concertSound.stageWork(data.currentWork, true)
      } else {
        concertSound.stageWork(concertSound.currentWork, false)
      }
    }
    if(data.twitchChannel != concertSound.twitchChannel) {
      concertSound.twitchChannel = data.twitchChannel;
    }
  })

	    // ******* Sections *******
	hub.channel('setSection', null, null, function(data) {
    console.log("the section is now: " + data);
    currentSection = data.section;
    setMessage(messageText[sections[currentSection]].default);
  });

  hub.channel('setMessage', null, null, function(data) {
    console.log(data);
    console.log("the message is now: " + sections[currentSection] + data.message);
    let sectionText = messageText[sections[currentSection]];
    setMessage(sectionText[data.section][data.message]);
    if('instruction' in data) {
      setInstruction(data.instruction);
    }
	});
	
	function getRandomColor() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++) {
      color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	}
  hub.channel('play', null, null, (data) => {
    // console.log('play:', data);
    hub.log('play:', data);
    if(data.val) {
      // concertSound.playVideo(data.video);
      if(concertSound.currentWork == data.work) {
        glass.playVideo(data.video, data.work)
      } else {
        console.log(data.work + ' not currently staged');
      }
    } else {
      // concertSound.pauseVideo(data.video);
      glass.pauseVideo(data.video, data.work)
    }
  });
  
      // Redundant - handled in artwork channel now
  // hub.channel('playWork', null, null, (data) => {
  //   // console.log('play:', data);
  //   hub.log('playWork:', data);
  //   if(data.val) {
  //     concertSound.playWork(data.work);
  //   } else {
  //     concertSound.pauseWork(data.work);
  //   }
  // });

  // artwork: {stage: true, play: true, pause: true, stop: true}
  hub.channel('artwork', null, null, (data) => {
    hub.log('artwork:', data);
    if(data.stage != undefined) {
      concertSound.stageWork(data.work, data.stage);
    }
    if(data.play != undefined) {
      concertSound.playWork(data.work);
    }
    if(data.pause != undefined) {
      concertSound.pauseWork(data.work);
    }
    if(data.stop != undefined) {
      concertSound.stopWork(data.work);
    }
    if(data.seek != undefined) {
      concertSound.playWork(data.work, data.seek);
    }
    if(data.gain != undefined) {
      concertSound.gainWork(data.work, data.gain);
    }
    if(data.artistTalk != undefined) {
      // data.work [work name], data.artistTalk [true, false]
        concertSound.playArtistTalk(data.work, data.artistTalk);
    }
    if(data.setTwitchChannel != undefined) {
      // data.work [work name], data.artistTalk [true, false]
        concertSound.setTwitchChannel(data.channel);
    }
  })

  hub.channel('stageWork', null, null, (data)=>{
    console.log('stageWork', data);
    concertSound.stageWork(data.work, data.stage)
  })
	
	// let concertSound = new ConcertSound();
	let concertSound = new Artworks();
  let glass = new Glass();
  glass.gain.disconnect();
  glass.gain.connect(concertSound.gain);
</script>
</body>
</html>

